<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>reg/login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body>

<div class="container text-center">

<div class="row"> <div class="col-4"></div><div class="col-4">
  <h3>Login / Registration form</h3>
<form name="authform">
  <div class="mb-3">
    <label for="email" class="form-label">Email</label>
  <input type="text" class="form-control" name="email" id="email"/>
</div>
<div class="mb-3">
  <label for="password" class="form-label">Password</label>
  <input type="password" class="form-control" name="password" id="password"/>
  </div>
  <div class="mb-3">
    <button type="button" class="btn btn-info" id="signUpButton">Register</button>
  <button type="button" class="btn btn-primary" id="signInButton">Login</button>
</div>
</form>
</div></div>

</div>


<script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.22.1/firebase-auth.js"></script>

<script type="module">
  // Import the functions you need from the SDKs you need
  //import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
  //import { auth } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
   apiKey: "AIzaSyD5IzBIDQ4V1HpoEPvWK7wKy-IAMDxIkJ8",
  authDomain: "reg-login-70fe5.firebaseapp.com",
  projectId: "reg-login-70fe5",
  storageBucket: "reg-login-70fe5.appspot.com",
  messagingSenderId: "829602472632",
  appId: "1:829602472632:web:4d2db4dd666bda17c00a4d"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);


// Get references to the email and password inputs, and the sign in and sign up buttons
var email = document.getElementById("email");
var password = document.getElementById("password");
var signInButton = document.getElementById("signInButton");
var signUpButton = document.getElementById("signUpButton");

// Add event listeners to the sign in and sign up buttons
signInButton.addEventListener("click", function() {
  // Sign in the user using Firebase's signInWithEmailAndPassword method
  firebase.auth().signInWithEmailAndPassword(email.value, password.value)
    .then(function() {
      // Redirect the user to the protected resources page
      window.location.href = "/protected-resources.html";
    })
    .catch(function(error) {
      // Show an error message
      alert(error.message);
    });
});

signUpButton.addEventListener("click", function() {
  alert("signing up with "+email.value);
  // Sign up the user using Firebase's createUserWithEmailAndPassword method
  firebase.auth().createUserWithEmailAndPassword(email.value, password.value)
    .then(function() {
      alert("sign up with "+email.value+" is successful");
      // Redirect the user to the protected resources page
      window.location.href = "/protected-resources.html";
    })
    .else(function(){
      alert("sign up with "+email.value+" is not successful");
    })
    .catch(function(error) {
      // Show an error message error.message
      alert(error.message);
    });
});
</script>


</body>
</html>

